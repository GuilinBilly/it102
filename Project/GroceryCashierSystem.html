<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8"/>
  <title>Grocery Cashier System</title>
  </head>
<body>
  <h1>Grocery Caashier System</h1>
    <!-- Step 1 : Login-->
    <section id="loginCard" class="class">
      <h2>Step 1 - User Login</h2>
      <div classs="field">
        <label for="username">Username</label>
        <input id="username" type="text" autocomplete="username" placeholder="e.g., billy"/>
      </div>
      <div class="field"><label for="userID">User ID</label><input id="userID" type="text"
          autocomplete="off" placeholder="e.g., B123" /></div>
      <div class="field"<label for="password">Password</label><input id="password" type="password"
                                  autocomplete="current-password" placeholder="........" /></div>
      <button id="loginBtn" class="primary">Log In</button>
      <div id="errors" role="alert"></div>
     </section>

    <!-- App Area displayed after successful login -->
    <section id="app" class="card">
      <h2 class="ok">Login Successful</h2>
      <p id="welcome"></p>
    </section>

    <!-- Step 3: Entry -->
    <section id="entry class="card">
      <h2>Step 3 - Add Item</h2>
      <div class="field"><label for="itemName">Item Name</label><input id="itemName"type="text" 
                                                                placeholder="e.g., Apple"></div>
      <div class="field"><label for="itemPrice">Item Price</label><input id="itemPrice"type="number"
        step="0.01" min="0" placeholder="e.g., 1.25"></div>
      <button id="addBtn" class="primary">+ Add</button>
      <button id="clearInputsBtn" type="button">clear</button>
      <div id="entryError" class="err" style="color:#b91c1c"></div>
     </section>
     <!-- Step 3: Cart -->
  <section id="cart" class="cart">
    <h2>Current Items</h2>
    <table id="items Table"border="0"width="100%"></table>
    <p id="subtotalLine"><strong>Subtotal:</strong> $0.00</p>
    <button id="checkoutBtn" class="primary">Checkout</button>
  </section>

      <!-- Step 4: Totals -->
  <section id="totals" class="cart">
     <h2>Step 4 - Totals</h2>
    <p id"taxline">Tax(10%):$0.00</p>
    <p id="totalLine"><strong>Total:</strong>$0.00</p>
  </section>
      <!-- Step 5: Receipt -->
  <section id="receipt" class="card" style="display:none">
    <h2>Step 5 - Receipt</h2>
    <pre id="receiptTax" style="white-space:pre-wrap"></pre>
    <button id="printBtn" classs="primary">Print</button>
    <button id="mewTaxBtn" type="button">New Transaction</button>
  </section>

  <script>
   fuction createCashier(defaultTax = 0.10){
    return{
      items:[],taxRate: defaultTax,
      addItem(name,price){this.items.push({name,price});},
      removeItem(index){if(index>=0 && index<this.items.length)this.items.splice(index, 1);}
      get subtotal(){return this.items.reduce((sum,it)=>sum + it.price,0);},
      get tax(){return this.subtotal*this.taxRate;},
      get total(){return this.subtotal + this.tax;}
    };
   }
    
  const allowedUsers= [
  {username:"billy",id:"B123",password:"pass123"},
  {username:"joyce",id"A777",password:"apple"},
    {username:"poul",id:"C009",password:"carrot"}
];
   let currentUser = null;
   const $username = document.getElementById("username");
   const $userId = document.getElementById("userId");
   const $password = document.getElementById("password");
   const $loginBtn = document.getElementById("loginBtn");
   const $error = document.getElementById("error");
   const $loginCard = document.getElementById("loginCard");
   const app = document.getElementById("app");
   const welcome = document.getElementById("welcome");

    function isValidCredential(inputName,inputId,inputPw){
      const match = allowedUsers.find(user =>
        user.username.toLowerCase()===inputName.trim().toLowerCase()&&
        user.id===inputId.trim() &&
        user.password===inputPw
      );
      if (match){
        currentUser = match;
        sessionStorage.setItem("cashier.currentUser",
                              JSON stringify(currentUser));
        return trye;
      }
        return false;
    }
    $loginBtn.addEventListener("click",function(){
      const inputName = $username.value;
      const inputId = $userId.value;
      const inputPw =$password.value
      if (!inputName || !inputId ||!inputPw){
        $errors.textContent = "Please enter Username, User ID, and Password.";
        return;
    }
       if (isValidCredential(inputName,inputId,inputPw)){
         $errors.textContent ="";
         $loginCard.style.display = "none";
         $app.style.display = "block";
         $welcome.textContent = 'Welcome,${currentUser.username}(ID: ${currentUser.id}).';
         window.cashier = createCashier(0.10);
         redrawTable();
         redrawTotal();
       }else{
         $errors.textContent = 'Invalid credentials.Please try again.';
         $password.value = "";
         $password.focus();
       }
    });
    [$username, $userId, $password].forEach(input =>{
      input.addEventListener("keydown", (e) => {if (e.key === "Enter") $loginBtn.click(); });
    });
    const $itemName = document.getElementById('itemName');
    const $itemPrice = document.getElementById('itemPrice');
    const $addBtn = document.getElementById('addBtn');
    const $clearInputsBtn = document.getElementById('clearInputsBtn');
    const $entryError = document.getElementById('entryError');
    const $itemsTable = document.getElementById('itemsTable');
    const $subtotalLine = document.getElementById('subtotalLine');
    const $checkoutBtn document.getElementById('checkoutBtn');
function toMoney(n) {return Number(n || 0).toFixed(2);}
    function redrawTable() {
      const rows = ['<tr><th>#</th><th>Name</th><th>Price ($)</th><th></th></tr>'];
      if (!window.cashier || window.cashier.items.length === 0){
        row.push('<tr><td colspan="4">No items yet.</td></tr>');
      } else {
        window.cashier.items.forEach((it, idx) => {
          rows.push('<tr><td>${idx + 1}</td><td>${it.name}</td><td>${toMoney(it.price)}</td><td><button
  data-remove="${idx}">x</button></td></tr>');
        });
      }
      $itemsTable.innerHTML = rows.join('');
      subtotalLine.innerHTML = '<strong>Subtotal:</strong> $${toMoney(window.cashier?.subtotal || 0)}';
      document.querySelectorAll('[data-remove]').forEach(btn => {
        btn.addEventListener('click', () => {
          const i = parseInt(btn.getAttribute('data-remove'),10);
          window.cashier.removeItem(i);
          redrawTable();
          redrawTotals();
        });
      });
    }
                                    

                                      
    
    













    
    
  </script>

</body>
</html> 
